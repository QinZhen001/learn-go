这里先记录一下乱七八糟的东西，留着之后去去汇总



# 基础



## new

`new` 是一个内置函数，用于创建某个类型的零值，并返回该类型的指针。它的语法如下：

```go
new(Type)
```

其中，`Type` 是所需创建的类型。

`new` 函数与使用 `&` 运算符创建指针的方式相似，但更为简洁。使用 `new` 函数可以直接创建某个类型的指针，而无需手动指定`&Type{}`。返回的指针指向该类型的零值。

以下是使用 `new` 函数创建一个指向整型的指针的示例：

```go
num := new(int)
```

这将创建一个指向整型的指针 `num`，并将其初始化为整型的零值 `0`。





## int32和int

在Go语言中，int32和int是两种不同的数字类型。

int32是int32位整数类型，表示一个带符号的32位整数，范围是-2147483648到2147483647。

int是int的默认类型，它根据操作系统的架构决定位数，可以是32位或64位整数类型。在大多数情况下，int是int32的别名。在32位操作系统上，int是32位整数类型，在64位操作系统上，int是64位整数类型。

因此，在大多数情况下，int32和int可以视为相同的东西，但在某些特定的环境下，它们可能会有不同的大小。为了保持代码的可移植性，建议明确指定所需的整数类型。



# 其他



## consul

Identity-based networking with Consul

[https://www.consul.io/](https://www.consul.io/)

Consul uses service identities and traditional networking practices to help organizations securely connect applications running in any environment.

Consul使用服务身份和传统的网络实践来帮助组织安全地连接在任何环境中运行的应用程序。

Consul提供了一组用于注册、发现和连接服务的功能，支持多种服务发现机制，包括DNS、HTTP和gRPC。它还提供了一种分布式一致性协议来确保服务注册数据的一致性和可靠性。Consul还具有丰富的可视化界面、健康检查功能和基于ACL的权限控制。总体来说，Consul提供了一种可靠的方法来管理和连接微服务架构中的各个服务。



### Consul和Etcd

Consul和Etcd都是分布式键值存储系统，用于在集群中存储和同步数据，但它们也有一些区别。

1. 一致性模型：Consul采用了强一致性模型，即读取和写入数据都会等待集群中的大多数节点确认。而Etcd则采用了弱一致性模型，即可能会存在短暂的数据不一致性。
2. 功能特性：Consul提供了一些高级功能，如服务发现、健康检查、负载均衡、故障转移等。而Etcd则更加专注于分布式键值存储的基本功能。
3. 架构设计：Consul采用Raft协议来实现一致性，每个节点都有相同的角色，可以进行读写操作。而Etcd也使用Raft协议，但采用了主从架构，其中的Leader节点用于处理写入请求，而Follower节点则用于处理读取请求。
4. 数据模型：Consul支持键值对存储，同时还提供了额外的功能如短生命周期的会话、事件等。而Etcd则只支持简单的键值对存储。

综上所述，Consul适用于需要更高级功能的场景，如服务发现和负载均衡等；而Etcd则更适用于简单的键值存储需求。





## elastic

elastic连接elasticsearch时自动转换连接地址

elastic.SetSniff(false)





## GORM

例子：

```go
	SubCategory      []*CateGory `gorm:"foreignKey:ParentCategoryID;references:ID"`
```

通过 `foreignKey` 方法来定义外键的引用关系





## 数据库



### 索引

数据库中的索引用于加快数据的搜索和访问速度。索引是一种数据结构，它包含了数据库中一个或多个列的值的副本。通过创建索引，数据库可以更快地定位和检索特定的数据行，减少了扫描整个表的开销。

索引具有以下几个作用：

1. 提高查询性能：在数据库中创建索引后，查询操作会更快速地定位到所需的数据，减少了扫描整个表的时间，提高了查询效率。
2. 加速排序操作：当需要对数据库表进行排序时，使用索引可以使排序操作更快速、更高效。
3. 加速连接操作：当进行连接操作时，索引可以加快表之间的关联并提高连接查询的性能。
4. 保证数据的唯一性：数据库中的索引可以通过设置唯一性约束，保证特定列的数据在表中的唯一性。

尽管索引可以提高查询性能，但也会降低插入、更新和删除数据的性能，因为每次对表进行数据变化时都需要维护索引的结构。因此，在创建索引时需要权衡索引的数量和使用场景，以便在满足查询性能需求的同时，尽量减少对数据操作的影响。





## 分布式系统架构

1. 客户-服务器架构（Client-Server Architecture）：系统中有一个或多个中央服务器，多个客户端通过网络与服务器进行通信。服务器负责处理客户端的请求，并向客户端提供所需的服务和资源。
2. 对等网络架构（Peer-to-Peer Architecture）：系统中的所有节点（peer）都具有相同的功能和地位，可以相互交互和通信。每个节点既可以作为客户端请求资源，又可以作为服务器提供资源。
3. 分层架构（Layered Architecture）：系统被划分为多个层次，每个层次负责特定的功能。数据和请求在各个层次之间传递，每个层次只与相邻的上层或下层进行通信，层次之间的接口简化了系统的设计和开发。
4. 事件驱动架构（Event-driven Architecture）：系统中的模块之间通过事件进行通信和协调。当一个模块发生某个事件时，其他模块可以接收到该事件并作出相应的处理。
5. 微服务架构（Microservices Architecture）：系统被划分为多个小型的、自治的服务，每个服务负责特定的功能。每个服务可以独立部署和扩展，通过轻量级的通信机制进行协作和集成。



### 主从架构

主从架构（Master-slave architecture）是一种分布式系统架构模式，其中一个节点作为主节点（Master）负责协调和管理其他节点（从节点/Slave），从而实现任务的分配和处理。主节点负责接收和处理客户端请求，然后将任务分发给从节点处理，从节点负责执行主节点分配给它的任务。主节点负责监控从节点的状态，并在从节点故障时重新分配任务到其他可用的从节点。主从架构可以提高系统的可伸缩性、可靠性和性能。 在主从架构中，主节点负责处理复杂的任务、存储系统的元数据和协调节点之间的通信。从节点负责执行实际的任务，如计算、存储数据等。主从架构通常用于数据库、分布式存储系统和分布式计算集群等场景，以提高系统的性能和容错能力。
